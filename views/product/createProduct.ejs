<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head')%>
<link rel="stylesheet" href="/css/productCreate.css" />
    <body>
        <%- include('../partials/header')%>
      
            <main>

                <div class="container">
                    <div class="titular">
                        <h2 class="titulo">Agregar Producto</h2>
                    </div>
                    <form action="/products" method="POST" id="form-create" enctype="multipart/form-data">
                        <article class="product-create-article">
                            <div class="icoExit">
                                <a href="/products">
                                    <i class="fas fa-times-circle"></i>
                                </a>
                            </div>
                            <div class="product-create-file">
                                <h2>Imagen</h2>
                                <input type="file" name="file">
                                <% if (locals.errors && errors.file){ %>
                                    <div class="text-danger">
                                        <%= errors.file.msg %>
                                    </div>
                                    <% } %>
                            </div>
                            <div class="setction">
                                <div class="product-create-category">
                                    <select name="category_id">
                                        <% categories.forEach(onecategory => { %>
                                         <option value="<%= onecategory.id %>" <%=locals.old && old.category_id=='onecategory.id' ? 'selected' : '' %>><%= onecategory.name %> </option>
                                        <% }) %>
                                    </select>
                                    <% if (locals.errors && errors.category){ %>
                                        <div class="text-danger">
                                            <%= errors.category_id.msg %>
                                        </div>
                                        <% } %>
                                </div>
                                <div class="product-create-category">
                                    <select name="brand_id">
                                        <% brands.forEach(oneBrand => { %>
                                         <option value="<%= oneBrand.id %>" <%= locals.old && old.brand_id == 'oneBrand.id' ? 'selected' : '' %> ><%= oneBrand.name %></option>
                                        <% }) %>
                                    </select>
                                    <% if (locals.errors && errors.brand_id){ %>
                                        <div class="text-danger">
                                            <%= errors.brand_id.msg %>
                                        </div>
                                        <% } %>
                                           </div>
                                <div class="product-create-name">
                                    <h2>Nombre</h2>
                                    <input type="text" name="name" id="prod-name" value="<%= locals.old && old.name ? old.name : '' %>"
                                        placeholder="Nombre" maxlength="30">
                                    <% if (locals.errors && errors.name){ %>
                                        <div class="text-danger">
                                            <%= errors.name.msg %>
                                        </div>
                                        <% } %>
                                </div>
                                <div class="product-create-descripcion">
                                    <h2>Descripcion</h2>
                                    <textarea name="description" id="descripction" cols="30"
                                        rows="10"><%= locals.old && old.description ? old.description : '' %></textarea>
                                    <% if (locals.errors && errors.description){ %>
                                        <div class="text-danger">
                                            <%= errors.description.msg %>
                                        </div>
                                        <% } %>
                                </div>
                                <div class="product-create-row">
                                    <div class="product-create-stock">
                                        <h2>Stock:</h2>
                                        <input type="number" value="<%= locals.old && old.stock ? old.stock : '' %>"
                                            name="stock" class="edit-stock" maxlength="6">
                                        <% if (locals.errors && errors.stock){ %>
                                            <div class="text-danger">
                                                <%= errors.stock.msg %>
                                            </div>
                                            <% } %>
                                    </div>
                                    <div class="product-create-price">
                                        <h2>Precio:</h2>
                                        <input type='number' name="price" id="prod-price"
                                        value="<%= locals.old && old.price ? old.price : '' %>" placeholder="$"
                                        maxlength="6">
                                    <% if (locals.errors && errors.price){ %>
                                        <div class="text-danger">
                                            <%= errors.price.msg %>
                                        </div>
                                        <% } %>
                                    </div>
                                </div>
                                <div class="btns">
                                    <button class="btn-agregar" type='submit'>Agregar</button>
                                    <button class="btn-delete" type='reset'><i class="fas fa-trash-alt"></i></button>
                                </div>
                            </div>
                            <div class="errores">
                                <ul></ul>
                            </div>

                        </article>
                    </form>
            </main>

            <%- include('../partials/footer')%>

    </body>

</html>